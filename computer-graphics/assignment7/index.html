
<table>

<tr>
<td><canvas id=canvas1 width=1000 height=400></td>
<td width=50></td>
<td valign=top>
</td>
</tr>

</table>

<script src=drawlib1.js></script>
<script src=M.js></script>
<script src=S.js></script>
<script>

   // MATRIX IS AN ARRAY OF 16 NUMBERS.

   var m = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];

   canvas1.update = function(g) {
      var p, C, c, canvas = this;

      // DRAW A SET OF CURVES IN 3D WITH PERSPECTIVE PROJECTION.

      function drawCurves(m, C) {
        var i, n, p, cv, x, y, z, fl = 5,
	     w = canvas.width;
	     h = canvas.height;

         // LOOP THROUGH CURVES.

         for (n = 0 ; n < C.length ; n++) {

            // BUILD THE PROJECTED CURVE, POINT BY POINT.

	    cv = [];
	    for (i = 0 ; i < C[n].length ; i++) {

	       // TRANSFORM POINT

	       p = M.transform(m, C[n][i]);

	       // RETRIEVE COORDINATES FROM TRANSFORMED POINT

	       x = p[0];
	       y = p[1];
	       z = p[2];

	       // DO PERSPECTIVE TRANSFORM

	       x *= fl / (fl - z);
	       y *= fl / (fl - z);

	       // DO VIEWPORT TRANSFORM

	       x =  w * x * .5 + .5 * w;
	       y = -w * y * .5 + .5 * h;
	       cv.push([x, y]);
            }

	    // DRAW THE PROJECTED CURVE ONTO THE CANVAS.

	    g.beginPath();
            g.moveTo(cv[0][0], cv[0][1]);
	    for (i = 1 ; i < cv.length ; i++)
               g.lineTo(cv[i][0], cv[i][1]);
	    g.stroke();
         }
      }

      g.lineCap = 'round';
      g.lineJoin = 'round';
      g.lineWidth = 1;

      // OUTLINE THE CANVAS

      //black background
      g.beginPath();
      g.rect(0, 0, this.width, this.height);
      g.fillStyle = "black";
      g.fill();

      g.strokeStyle = '#000000'; 
      g.beginPath();
      g.moveTo(0,0);
      g.lineTo(this.width,0);
      g.lineTo(this.width,this.height);
      g.lineTo(0,this.height);
      g.lineTo(0,0);
      g.stroke();

      M.identity(m);
     // M.scale(m, 0.3);  // Scale the scene down.

      // DRAW SHAPES.

      //sun
      M.save(m);
      M.scale(m, 0.35);
      M.translate(m, [-2.65,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#ffff4c";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      M.restore(m);

      //mercury
      M.save(m);
      M.scale(m, 0.025);
      M.translate(m, [-20,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#D0D0D0";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      M.restore(m);

      //mercury
      M.save(m);
      M.scale(m, 0.050);
      M.translate(m, [-7.5,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#ffa500";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      M.restore(m);

      //earth
      M.save(m);
      M.scale(m, 0.050);
      M.translate(m, [-4.5,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#0000CD";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      M.restore(m);

      //mars
      M.save(m);
      M.scale(m, 0.020);
      M.translate(m, [-5,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#DC143C";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      M.restore(m);

      //Jupiter
      M.save(m);
      M.scale(m, 0.20);
      M.translate(m, [0.90,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#CD853F";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      M.restore(m);

      //Saturn
      M.save(m);
      M.scale(m, 0.15);
      M.translate(m, [4,0,0]);
      M.rotateX(m, Math.PI / 2);
      M.rotateZ(m, time/2); 
      g.strokeStyle="#F2f2f2";
      drawCurves(m, S.parametricMesh(S.sphere, 10, 10));
      g.strokeStyle= "#DA70D6"; 
      drawCurves(m, S.parametricMesh(S.torus, 10, 10));
      M.restore(m);

   }

   // WE ARE DRAWING ONLY ONE CANVAS.

   drawCanvases([canvas1]);
</script>

